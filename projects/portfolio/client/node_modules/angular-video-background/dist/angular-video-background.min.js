/**
* Package: angular-video-background - v1.0.3 
* Description: use any video as background for your html pages with many options 
* Last build: 2017-11-29 
* @author codekraft-studio 
* @license ISC 
*/

angular.module("video-background",[]).run(["$templateCache",function(a){a.put("angular-video-background/main.html",'<video></video><div class="video-controls"><span ng-bind="currentTime | number: 2"></span></div></div>')}]),angular.module("video-background").directive("videoBackground",["$log","$timeout","$document",function(a,b,c){function d(d,e,f){function g(a){27===a.which&&(m.pause(),m.currentTime=0),32!==a.which||m.endend||(m.paused?m.play():m.pause()),38===a.which&&(m.volume=m.volume+.1<1?m.volume+.1:1),40===a.which&&(m.volume=m.volume-.1>0?m.volume-.1:0)}function h(a){37===a.which&&(a.preventDefault(),!m.paused&&m.autopause&&m.pause(),m.currentTime>0&&m.currentTime>=2?m.currentTime-=2:m.currentTime=0),39===a.which&&(a.preventDefault(),!m.paused&&m.autopause&&m.pause(),m.currentTime<m.duration?m.currentTime+=2:m.currentTime=m.duration)}if(!d.source||!angular.isObject(d.source)||!Object.keys(d.source).length)return void a.warn("VideoBg: Expected a valid object, received:",d.source);var i,j=["mp4","webm","ogg"],k=e.children().eq(0),l=e.children().eq(1),m=k[0];m.firstPlay=!0,m.firstEnd=!0,m.autopause=void 0!==f.autopause&&"false"!==f.autopause,m.loop=void 0!==f.loop&&"false"!==f.loop,m.volume=f.volume&&0<=f.volume&&f.volume<=1?f.volume:1,m.defaultPlaybackRate=f.playbackRate?f.playbackRate:1,k.addClass("ng-hide"),l.addClass("ng-hide"),k.addClass("video-background");for(var n in d.source)if(d.source.hasOwnProperty(n)&&j.indexOf(n)>-1){var o=document.createElement("source");o.src=d.source[n],o.type="video/"+n,m.appendChild(o)}else a.warn("videoBg: You passed a type",n,"that is not valid, must be one of theese: [mp4,webm,ogg]");m.onended=function(){if(m.firstEnd)return m.firstEnd=!1,!angular.isFunction(d.onFirstend)||d.$apply(d.onFirstend())},m.onloadeddata=function(){if(m.currentTime=f.startTime?f.startTime:0,d.currentTime=m.currentTime,void 0!==f.keyControls&&"false"!==f.keyControls&&(c.on("keydown",h),c.on("keyup",g),d.$on("$destroy",function(){c.off("keydown",h),c.off("keyup",g)})),k.removeClass("ng-hide"),void 0!==f.autoplay&&"false"!==f.autoplay)return m.play()},m.ontimeupdate=function(){if(f.endTime&&f.endTime<=m.currentTime)return d.currentTime=f.endTime,m.currentTime=m.duration;d.$apply(function(){return d.currentTime=m.currentTime})},m.onplay=function(){if(m.firstPlay)return m.firstPlay=!1,!angular.isFunction(d.onFirstplay)||d.$apply(d.onFirstplay())},"false"!==f.controlBox&&(m.onseeking=function(){"false"!==f.showTime&&d.$apply(function(){return l.removeClass("ng-hide")})},m.onseeked=function(){b.cancel(i),i=b(function(){d.$apply(function(){l.addClass("ng-hide")})},2e3)},m.onpause=function(){b.cancel(i),"false"!==f.showTime&&(l.removeClass("ng-hide"),i=b(function(){d.$apply(function(){l.addClass("ng-hide")})},2e3))})}return{restrict:"E",scope:{source:"=",onFirstplay:"&",onFirstend:"&"},templateUrl:"angular-video-background/main.html",link:d}}]);